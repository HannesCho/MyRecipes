(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,c){},37:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(28),s=c.n(a),r=(c(36),c(9)),l=c(2),i=(c(37),c(4)),o=c(0);function j(){return Object(o.jsxs)("div",{className:"home-container",children:[Object(o.jsx)("div",{className:"first-row",children:Object(o.jsxs)("div",{className:"first-row-text",children:[Object(o.jsx)("h1",{children:"Welcome to MyReS"}),Object(o.jsx)("h2",{children:"My Recipe Scrapbook"}),Object(o.jsx)(i.b,{to:"/recipes",children:Object(o.jsx)("button",{className:"main-btn",children:"Find your recipes"})})]})}),Object(o.jsxs)("div",{className:"second-row",children:[Object(o.jsx)("div",{className:"second-left"}),Object(o.jsx)("div",{className:"second-middle"}),Object(o.jsx)("div",{className:"second-right"})]})]})}var d=c(3),u=c.n(d),b=c.p+"static/media/home.9f05f711.png";function h(e){var t=function(){u.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))};return Object(o.jsx)("nav",{children:e.user?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"nav-left",children:Object(o.jsx)(i.b,{to:"/",children:Object(o.jsx)("img",{className:"home-icon",src:b,alt:"home"})})}),Object(o.jsxs)("div",{className:"nav-right",children:[Object(o.jsx)(i.b,{to:"/recipes",children:Object(o.jsx)("button",{className:"nav-btn list",children:"Recipes"})}),Object(o.jsx)(i.b,{to:"/profile/".concat(e.user._id),children:Object(o.jsx)("button",{className:"nav-btn profile",children:"Profile"})}),Object(o.jsx)(i.b,{to:"/",onClick:function(){return t()},children:Object(o.jsx)("button",{className:"nav-btn logout",children:"Logout"})})]})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"nav-left",children:Object(o.jsx)(i.b,{to:"/",children:Object(o.jsx)("img",{className:"home-icon",src:b,alt:"home"})})}),Object(o.jsxs)("div",{className:"nav-right",children:[Object(o.jsx)(i.b,{to:"/recipes",children:Object(o.jsx)("button",{className:"nav-btn list",children:"Recipes"})}),Object(o.jsx)(i.b,{to:"/signup",children:Object(o.jsx)("button",{className:"nav-btn signup",children:"Signup"})}),Object(o.jsx)(i.b,{to:"/login",children:Object(o.jsx)("button",{className:"nav-btn login",children:"Login"})})]})]})})}var O=c(6),m=c(5);function x(e){var t=Object(n.useState)(!1),c=Object(l.a)(t,2),a=c[0],s=c[1],r=e.strMeal,j=e.strTags,d=e._id,u=e.strMealThumb,b=e.strCategory,h=e.strArea,O=e.user;return Object(n.useEffect)((function(){O&&e.favorite.includes(d)?s(!0):s(!1)}),[e.favorite,d,O]),Object(o.jsxs)("div",{className:"card-box",children:[Object(o.jsx)("div",{className:"card-left",children:Object(o.jsx)("img",{src:u,alt:r})}),Object(o.jsxs)("div",{className:"card-right",children:[Object(o.jsx)(i.b,{to:"/recipe/".concat(d),className:"card-title",children:r.length>20?r.slice(0,20)+"...":r}),Object(o.jsxs)("div",{className:"card-text",children:[Object(o.jsxs)("p",{children:[b," / ",h," /"]}),Object(o.jsx)("p",{children:j&&j.length>10?j.slice(0,10)+"...":j}),Object(o.jsx)("div",{className:"fav-btn",children:!0===a?Object(o.jsx)("button",{onClick:function(){return e.handleFavorite(d)},children:Object(o.jsx)("i",{className:"fas fa-heart"})}):Object(o.jsx)("button",{onClick:function(){return e.handleFavorite(d)},children:Object(o.jsx)("i",{className:"far fa-heart"})})})]})]})]})}function g(e){var t=Object(n.useState)(e.user),c=Object(l.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)([]),j=Object(l.a)(i,2),d=j[0],b=j[1],h=Object(n.useState)(e.user?e.user.favorite:null),O=Object(l.a)(h,2),g=O[0],f=O[1],p=Object(n.useState)([]),v=Object(l.a)(p,2),N=v[0],w=v[1],C=Object(n.useState)(1),y=Object(l.a)(C,2),I=y[0],S=y[1],F=Object(n.useState)([]),M=Object(l.a)(F,2),E=M[0],A=M[1],T=e.user._id;Object(n.useEffect)((function(){u.a.get("/api/auth/loggedin").then((function(e){s(e.data),f(e.data.favorite)})).catch((function(e){console.log(e)}))}),[]);Object(n.useEffect)((function(){u.a.get("/api/recipes").then((function(e){console.log(e),b(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){f(e.user.favorite)}),[e.user.favorite]);var U=function(e){if(a)if(g.includes(e)){var t=g.filter((function(t){return t!==e&&(console.log(t),console.log(e),!0)}));console.log(t),u.a.delete("/api/user/".concat(T),{data:{favorite:Object(m.a)(t)}}).then((function(e){console.log("thisis res.data:",e.data),f(e.data.favorite),console.log("this is fav:",g)})).catch((function(e){return console.log(e)}))}else u.a.put("/api/user/".concat(T),{favorite:[].concat(Object(m.a)(g),[e])}).then((function(t){f([].concat(Object(m.a)(g),[e])),console.log("add fav:",g),console.log("added user:",t.data)})).catch((function(e){return console.log(e)}));else f(null)},k=Object(n.useState)(""),R=Object(l.a)(k,2),_=R[0],D=R[1];Object(n.useEffect)((function(){var e=function(){return console.log(_),d.sort((function(e,t){return e.strMeal.localeCompare(t.strMeal)})).filter((function(e){return"".concat(e.strMeal).concat(e.strCategory).concat(e.strArea).concat(e.strTags).toLowerCase().includes(_.toLowerCase())}))};e(),e().length>20?(console.log(e()),w(e().slice(20*(I-1),20*(I-1)+20))):w(e()),function(){if(e().length>20){for(var t=Math.floor(e().length/20)+1,c=[],n=1;n<=t;n++)c.push(n);A(c),console.log(E)}else A([1])}()}),[I,d,_,E]);var P=function(e){S(e.target.value)};return Object(o.jsxs)("div",{className:"recipes-container",children:[Object(o.jsx)("div",{className:"search-box",children:Object(o.jsx)("input",{type:"text",name:"search",value:_,onChange:function(e){return D(e.target.value)},placeholder:"Find your Recipe"})}),Object(o.jsx)("h1",{className:"list-title",children:"All Recipes"}),Object(o.jsx)("div",{className:"pages",children:E.map((function(e){return Object(o.jsx)(o.Fragment,{children:e===E.length?Object(o.jsxs)(o.Fragment,{children:[" ",Object(o.jsx)("button",{onClick:P,value:e,children:e})," "]}):Object(o.jsxs)(o.Fragment,{children:[" ",Object(o.jsx)("button",{onClick:P,value:e,children:e}),Object(o.jsx)("span",{children:"/"})]})})}))}),Object(o.jsx)("div",{className:"cards-box",children:N.sort((function(e,t){return e.strMeal.localeCompare(t.strMeal)})).map((function(t){return Object(o.jsx)(x,Object(r.a)({user:e.user,favorite:g,handleFavorite:U},t),t._id)}))})]})}var f=u.a.create({baseURL:"/api/recipes"}),p=function(e){throw e},v={service:f,handleUpload:function(e){return f.post("/upload",e).then((function(e){return e.data})).catch(p)}};function N(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),O=h[0],x=h[1],g=Object(n.useState)(""),f=Object(l.a)(g,2),p=f[0],N=f[1],w=Object(n.useState)([""]),C=Object(l.a)(w,2),y=C[0],I=C[1],S=function(){I([].concat(Object(m.a)(y),[""]))},F=Object(n.useState)([{strIngredient:"",strMeasure:""}]),M=Object(l.a)(F,2),E=M[0],A=M[1],T=function(e,t){var c=e.target,n=c.name,a=c.value,s=Object(m.a)(E);s[t][n]=a,A(s)},U=function(){A([].concat(Object(m.a)(E),[{strIngredient:"",strMeasure:""}]))},k=Object(n.useState)(""),R=Object(l.a)(k,2),_=R[0],D=R[1];return Object(o.jsxs)("div",{className:"add-container",children:[Object(o.jsx)("h3",{className:"add title",children:"Add Recipe Form"}),Object(o.jsx)("form",{onSubmit:function(t){t.preventDefault();var c={strMeal:a,strCategory:j,strArea:O,strMealThumb:_,Ingredients:E,Instructions:y,strTags:p,creatorId:e.user._id};u.a.post("/api/recipes",c).then((function(t){s(""),d(""),x(""),D(""),A([""]),I([{strIngredient:"",strMeasure:""}]),N(""),e.history.push("/recipes")})).catch((function(e){return console.log(e)}))},children:Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strMeal",children:"Name: "})}),Object(o.jsxs)("td",{className:"row-right",children:[" ",Object(o.jsx)("input",{placeholder:"Enter Name",type:"text",name:"strMeal",value:a,onChange:function(e){return s(e.target.value)}})]})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strCategory",children:"Category: "})}),Object(o.jsx)("td",{className:"row-right",children:Object(o.jsx)("input",{placeholder:"Enter Category",type:"text",name:"strCategory",value:j,onChange:function(e){return d(e.target.value)}})})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strArea",children:"Area: "})}),Object(o.jsx)("td",{className:"row-right",children:Object(o.jsx)("input",{placeholder:"Enter Area",type:"text",name:"strArea",value:O,onChange:function(e){return x(e.target.value)}})})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"uploadImage",children:"Image: "})}),Object(o.jsxs)("td",{className:"row-right",children:[" ",Object(o.jsx)("input",{type:"file",name:"uploadImage",onChange:function(e){e.preventDefault(),console.log(e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),v.handleUpload(t).then((function(e){D(e.secure_url),console.log(_)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))}})]})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:"Image Preview"}),Object(o.jsxs)("td",{className:"row-right image-preview",children:[" ",_&&Object(o.jsx)("img",{src:_,style:{height:"100px"},alt:""})]})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left add-text",children:Object(o.jsx)("label",{htmlFor:"Ingredients",children:"Ingredients: "})}),Object(o.jsx)("td",{className:"row-right add-box",children:E.map((function(e,t){return Object(o.jsxs)("div",{className:"box",children:[Object(o.jsx)("input",{name:"strIngredient",placeholder:"Enter Ingredient",value:e.strIngredient,onChange:function(e){return T(e,t)}}),Object(o.jsx)("input",{name:"strMeasure",placeholder:"Enter amount",value:e.strMeasure,onChange:function(e){return T(e,t)}}),Object(o.jsxs)("div",{className:"btn-box",children:[1!==E.length&&Object(o.jsx)("button",{className:"mr10",onClick:function(){return function(e){var t=Object(m.a)(E);t.splice(e,1),A(t)}(t)},children:"Remove"}),E.length-1===t&&Object(o.jsx)("button",{className:"mr10",onClick:U,children:"Add"})]})]},t)}))})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left add-text",children:Object(o.jsx)("label",{htmlFor:"Instructions",children:"Instructions: "})}),Object(o.jsx)("td",{className:"row-right add-box",children:y.map((function(e,t){return Object(o.jsxs)("div",{className:"box",children:[Object(o.jsx)("input",{name:"Instructions",placeholder:"Enter Instructions",value:e,onChange:function(e){return function(e,t){var c=e.target.value,n=Object(m.a)(y);n[t]=c,I(n)}(e,t)}}),Object(o.jsxs)("div",{className:"btn-box",children:[1!==y.length&&Object(o.jsx)("button",{className:"mr10",onClick:function(){return function(e){var t=Object(m.a)(y);t.splice(e,1),I(t)}(t)},children:"Remove"}),y.length-1===t&&Object(o.jsx)("button",{className:"mr10",onClick:S,children:"Add"})]})]},t)}))})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strTags",children:"Tags: "})}),Object(o.jsxs)("td",{className:"row-right",children:[" ",Object(o.jsx)("input",{type:"text",name:"strTags",placeholder:"Enter Tags",value:p,onChange:function(e){return N(e.target.value)}})]})]}),Object(o.jsx)("tr",{children:Object(o.jsxs)("button",{className:"add-btn",type:"submit",children:["Add Recipe ",Object(o.jsx)("i",{class:"fas fa-plus"})," "]})})]})})]})}function w(e){var t=Object(n.useState)(null),c=Object(l.a)(t,2),a=c[0],s=c[1],r=e.match.params.id;return Object(n.useEffect)((function(){u.a.get("/api/recipes/".concat(r)).then((function(e){console.log(e.data),s(e.data)})).catch((function(e){return console.log(e)}))}),[r]),Object(o.jsx)("div",{className:"container",children:a&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:a.strMeal}),Object(o.jsxs)("div",{className:"detail-container",children:[Object(o.jsxs)("div",{className:"detail-left",children:[Object(o.jsx)("img",{src:a.strMealThumb,alt:""}),Object(o.jsxs)("h4",{className:"category",children:["Category : ",a.strCategory]}),Object(o.jsxs)("h4",{className:"area",children:["Area : ",a.strArea]}),Object(o.jsxs)("h4",{className:"tags",children:["Tags : ",a.strTags]})]}),Object(o.jsxs)("div",{className:"detail-right",children:[Object(o.jsx)("h4",{children:"Ingredients"}),Object(o.jsx)("div",{className:"ingredients",children:a.Ingredients.map((function(e){return Object(o.jsxs)("p",{children:[e.strIngredient,": ",e.strMeasure]})}))}),Object(o.jsx)("h4",{children:"instructions"}),Object(o.jsx)("ul",{className:"instructions",children:a.Instructions.map((function(e){return Object(o.jsx)("li",{children:e})}))})]})]}),(e.user._id===a.creatorId||"admin"===e.user.role)&&Object(o.jsx)(i.b,{to:"/recipe/edit/".concat(a._id),children:Object(o.jsx)("button",{className:"edit-btn",children:"Edit this recipe"})})]})})}function C(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),O=h[0],x=h[1],g=Object(n.useState)(""),f=Object(l.a)(g,2),p=f[0],N=f[1],w=Object(n.useState)(""),C=Object(l.a)(w,2),y=C[0],I=C[1],S=Object(n.useState)([""]),F=Object(l.a)(S,2),M=F[0],E=F[1],A=function(){E([].concat(Object(m.a)(M),[""]))},T=Object(n.useState)([{strIngredient:"",strMeasure:""}]),U=Object(l.a)(T,2),k=U[0],R=U[1],_=function(e,t){var c=e.target,n=c.name,a=c.value,s=Object(m.a)(k);s[t][n]=a,R(s)},D=function(){R([].concat(Object(m.a)(k),[{strIngredient:"",strMeasure:""}]))},P=e.match.params.id;Object(n.useEffect)((function(){u.a.get("/api/recipes/".concat(P)).then((function(e){s(e.data.strMeal),d(e.data.strCategory),x(e.data.strArea),I(e.data.strMealThumb),N(e.data.strTags),E(e.data.Instructions),R(e.data.Ingredients)})).catch((function(e){return console.log(e)}))}),[P]);return Object(o.jsxs)("div",{className:"edit-container",children:[Object(o.jsx)("h3",{className:"title",children:"Edit this recipe"}),Object(o.jsx)("form",{onSubmit:function(t){t.preventDefault();var c={strMeal:a,strCategory:j,strArea:O,strMealThumb:y,Ingredients:k,Instructions:M,strTags:p};u.a.put("/api/recipes/".concat(P),c).then((function(t){e.history.push("/recipe/".concat(P))})).catch((function(e){return console.log(e)}))},children:Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strMeal",children:"Name: "})}),Object(o.jsxs)("td",{className:"row-right",children:[" ",Object(o.jsx)("input",{placeholder:"Enter Name",type:"text",name:"strMeal",value:a,onChange:function(e){return s(e.target.value)}})]})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strCategory",children:"Category: "})}),Object(o.jsx)("td",{className:"row-right",children:Object(o.jsx)("input",{placeholder:"Enter Category",type:"text",name:"strCategory",value:j,onChange:function(e){return d(e.target.value)}})})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strArea",children:"Area: "})}),Object(o.jsx)("td",{className:"row-right",children:Object(o.jsx)("input",{placeholder:"Enter Area",type:"text",name:"strArea",value:O,onChange:function(e){return x(e.target.value)}})})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"uploadImage",children:"Image: "})}),Object(o.jsxs)("td",{className:"row-right",children:[" ",Object(o.jsx)("input",{type:"file",name:"uploadImage",onChange:function(e){e.preventDefault(),console.log(e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),v.handleUpload(t).then((function(e){I(e.secure_url),console.log(y)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))}})]})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:"Image Preview"}),Object(o.jsxs)("td",{className:"row-right image-preview",children:[" ",y&&Object(o.jsx)("img",{src:y,style:{height:"100px"},alt:""})]})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left add-text",children:Object(o.jsx)("label",{htmlFor:"Ingredients",children:"Ingredients: "})}),Object(o.jsx)("td",{className:"row-right add-box",children:k.map((function(e,t){return Object(o.jsxs)("div",{className:"box",children:[Object(o.jsx)("input",{name:"strIngredient",placeholder:"Enter Ingredient",value:e.strIngredient,onChange:function(e){return _(e,t)}}),Object(o.jsx)("input",{name:"strMeasure",placeholder:"Enter amount",value:e.strMeasure,onChange:function(e){return _(e,t)}}),Object(o.jsxs)("div",{className:"btn-box",children:[1!==k.length&&Object(o.jsx)("button",{className:"mr10",onClick:function(){return function(e){var t=Object(m.a)(k);t.splice(e,1),R(t)}(t)},children:"Remove"}),k.length-1===t&&Object(o.jsx)("button",{className:"mr10",onClick:D,children:"Add"})]})]},t)}))})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left add-text",children:Object(o.jsx)("label",{htmlFor:"Instructions",children:"Instructions: "})}),Object(o.jsx)("td",{className:"row-right add-box",children:M.map((function(e,t){return Object(o.jsxs)("div",{className:"box",children:[Object(o.jsx)("input",{name:"Instructions",placeholder:"Enter Instructions",value:e,onChange:function(e){return function(e,t){var c=e.target.value,n=Object(m.a)(M);n[t]=c,E(n)}(e,t)}}),Object(o.jsxs)("div",{className:"btn-box",children:[1!==M.length&&Object(o.jsx)("button",{className:"mr10",onClick:function(){return function(e){var t=Object(m.a)(M);t.splice(e,1),E(t)}(t)},children:"Remove"}),M.length-1===t&&Object(o.jsx)("button",{className:"mr10",onClick:A,children:"Add"})]})]},t)}))})]}),Object(o.jsxs)("tr",{className:"add-row",children:[Object(o.jsx)("td",{className:"row-left",children:Object(o.jsx)("label",{htmlFor:"strTags",children:"Tags: "})}),Object(o.jsxs)("td",{className:"row-right",children:[" ",Object(o.jsx)("input",{type:"text",name:"strTags",placeholder:"Enter Tags",value:p,onChange:function(e){return N(e.target.value)}})]})]}),Object(o.jsx)("tr",{children:Object(o.jsx)("button",{className:"update-btn",type:"submit",children:"Update"})}),Object(o.jsx)("tr",{children:Object(o.jsx)("button",{className:"edit-btn",onClick:function(){u.a.delete("/api/recipes/".concat(P)).then((function(){e.history.push("/recipes")})).catch((function(e){return console.log(e)}))},children:"Delete This"})})]})})]})}function y(e){var t=Object(n.useState)(e.user),c=Object(l.a)(t,2),a=(c[0],c[1]),s=Object(n.useState)(e.user.username),j=Object(l.a)(s,2),d=j[0],b=j[1],h=Object(n.useState)(e.user.favorite),O=Object(l.a)(h,2),g=O[0],f=O[1],p=Object(n.useState)([]),v=Object(l.a)(p,2),N=v[0],w=v[1],C=Object(n.useState)([]),y=Object(l.a)(C,2),I=y[0],S=y[1];Object(n.useEffect)((function(){u.a.get("/api/auth/loggedin").then((function(e){a(e.data),b(e.data.username),f(e.data.favorite)})).catch((function(e){console.log(e)}))}),[]);var F=e.user._id;Object(n.useEffect)((function(){u.a.get("/api/user/creator/".concat(F)).then((function(e){console.log("user created",e.data),S(e.data)})).catch((function(e){return console.log(e)}))}),[F]),Object(n.useEffect)((function(){u.a.get("/api/user/".concat(F)).then((function(e){console.log(e.data),w(e.data)})).catch((function(e){return console.log(e)}))}),[F,g]);var M=function(e){if(g.includes(e)){var t=g.filter((function(t){return t!==e&&(console.log(t),console.log(e),!0)}));console.log(t),u.a.delete("/api/user/".concat(F),{data:{favorite:Object(m.a)(t)}}).then((function(e){console.log("thisis res.data:",e.data),f(e.data.favorite),console.log("this is fav:",g)})).catch((function(e){return console.log(e)}))}else u.a.put("/api/user/".concat(F),{favorite:[].concat(Object(m.a)(g),[e])}).then((function(t){f([].concat(Object(m.a)(g),[e])),console.log("add fav:",g),console.log("added user:",t.data)})).catch((function(e){return console.log(e)}))};return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h3",{children:"User Profile"}),Object(o.jsx)("h4",{children:"User Info"}),Object(o.jsxs)("h5",{children:["User Name: ",d]}),Object(o.jsxs)("div",{className:"profile-container",children:[Object(o.jsxs)("div",{className:"profile-left",children:[Object(o.jsx)("h3",{children:"Your Recipe"}),Object(o.jsx)("div",{className:"profile-recipes",children:I.length>0?I.sort((function(e,t){return e.strMeal.localeCompare(t.strMeal)})).map((function(t){return Object(o.jsx)(x,Object(r.a)({user:e.user,favorite:g,handleFavorite:M},t),t._id)})):Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h1",{children:"Add your Recipe"})})}),Object(o.jsx)("div",{children:Object(o.jsx)(i.b,{to:"/recipes/add",children:Object(o.jsx)("button",{className:"add-btn",children:"Add recipe"})})})]}),Object(o.jsxs)("div",{className:"profile-right",children:[Object(o.jsx)("h3",{children:"User Favorite"}),Object(o.jsx)("div",{className:"favorite",children:N.length>0?N.sort((function(e,t){return e.strMeal.localeCompare(t.strMeal)})).map((function(t){return Object(o.jsx)(x,Object(r.a)({user:e.user,favorite:g,handleFavorite:M},t),t._id)})):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"Add your Favorites"}),Object(o.jsx)(i.b,{to:"/recipes",children:Object(o.jsx)("button",{className:"add-btn",children:"Go to recipes"})})]})})]})]})]})})}function I(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),O=h[0],m=h[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"signup-container",children:[Object(o.jsx)("h3",{children:"Create Account"}),Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return u.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(a,j).then((function(t){console.log(t),t.message?(s(""),d(""),m(t.message)):(e.setUser(t),e.history.push("/login"))})).catch((function(e){return console.log(e)}))},children:[Object(o.jsx)("label",{htmlFor:"username",children:"Username "}),Object(o.jsx)("input",{type:"text",name:"username",value:a,onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"password",children:"Password "}),Object(o.jsx)("input",{type:"password",name:"password",value:j,onChange:function(e){return d(e.target.value)}}),Object(o.jsx)("button",{type:"submit",children:"Sign Up"}),O&&Object(o.jsx)("h3",{className:"message",children:O})]})]})})}function S(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),j=i[0],d=i[1],b=Object(n.useState)(""),h=Object(l.a)(b,2),O=h[0],m=h[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"login-container",children:[Object(o.jsx)("h3",{children:"Log In"}),Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return u.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(a,j).then((function(t){console.log(t),t.message?(s(""),d(""),m(t.message)):(e.setUser(t),e.history.push("/recipes"))})).catch((function(e){return console.log(e)}))},children:[Object(o.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(o.jsx)("input",{type:"text",name:"username",value:a,onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(o.jsx)("input",{type:"password",name:"password",value:j,onChange:function(e){return d(e.target.value)}}),Object(o.jsx)("button",{type:"submit",children:"Log In"}),O&&Object(o.jsx)("h3",{className:"message",children:O})]})]})})}var F=c(31),M=["component","user","path","redirectPath"],E=function(e){var t=e.component,c=e.user,n=e.path,a=e.redirectPath,s=void 0===a?"/":a,l=Object(F.a)(e,M);return Object(o.jsx)(O.b,{exact:!0,path:n,render:function(e){return c?Object(o.jsx)(t,Object(r.a)(Object(r.a)(Object(r.a)({},e),l),{},{user:c})):Object(o.jsx)(O.a,{to:s})}})};var A=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"New thumb"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(e.target[0].files[0]);var t=new FormData;t.append("imageUrl",e.target[0].files[0]),v.handleUpload(t).then((function(e){a(e.secure_url)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))},children:[Object(o.jsx)("input",{type:"file"}),c&&Object(o.jsx)("img",{src:c,style:{height:"200px"},alt:""}),Object(o.jsx)("button",{type:"submit",children:"upload image"})]})]})};var T=function(e){var t=Object(n.useState)(e.user),c=Object(l.a)(t,2),a=c[0],s=c[1],i=function(e){s(e)};return console.log("App js: ",a),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(h,{user:a,setUser:i}),Object(o.jsxs)(O.d,{children:[Object(o.jsx)(O.b,{exact:!0,path:"/",component:j}),Object(o.jsx)(O.b,{exact:!0,path:"/image",component:A}),Object(o.jsx)(E,{exact:!0,path:"/profile/:id",user:a,component:y,redirect:"/login"}),Object(o.jsx)(O.b,{exact:!0,path:"/recipes",render:function(e){return Object(o.jsx)(g,Object(r.a)({user:a},e))}}),Object(o.jsx)(E,{exact:!0,path:"/recipes/add",user:a,component:N,redirect:"/login"}),Object(o.jsx)(E,{exact:!0,path:"/recipe/:id",user:a,component:w,redirect:"/login"}),Object(o.jsx)(E,{exact:!0,path:"/recipe/edit/:id",user:a,component:C,redirect:"/recipe/:id"}),Object(o.jsx)(O.b,{exact:!0,path:"/signup",render:function(e){return Object(o.jsx)(I,Object(r.a)({setUser:i},e))}}),Object(o.jsx)(O.b,{exact:!0,path:"/login",render:function(e){return Object(o.jsx)(S,Object(r.a)({setUser:i},e))}})]})]})};function U(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{id:"footer",children:[Object(o.jsxs)("span",{className:"names",children:["Hannes Cho ",Object(o.jsx)("i",{className:"fab fa-facebook-square"}),Object(o.jsx)("i",{className:"fab fa-linkedin"}),Object(o.jsx)("i",{className:"fab fa-instagram-square"}),Object(o.jsx)("i",{className:"fab fa-github-square"})]}),Object(o.jsx)("div",{className:"line"}),Object(o.jsxs)("div",{className:"copyright",children:["\xa9 2021 All Rights Reserved \xa9 2021 TheMealDB Copyright (data api)",Object(o.jsx)("a",{className:"navbar-brand",href:"https://www.themealdb.com",children:Object(o.jsx)("img",{src:"https://www.themealdb.com/images/logo-small.png",alt:"logo",width:"100px"})})]})]})})}u.a.get("/api/auth/loggedin").then((function(e){console.log("logged in user: ",e.data);var t=e.data;s.a.render(Object(o.jsxs)(i.a,{children:[Object(o.jsx)(T,{user:t}),Object(o.jsx)(U,{})]}),document.getElementById("root"))}))}},[[65,1,2]]]);
//# sourceMappingURL=main.cb788c97.chunk.js.map